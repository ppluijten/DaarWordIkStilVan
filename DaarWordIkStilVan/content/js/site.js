((function ($) {
    $(function () {
        var pages = new Pages("pages");
        $("div[data-page]")
            .each(function () {
            pages.render($(this));
        });
        $("body[data-background]")
            .each(function () {
            $(this).css("background-image", "url('content/images/" + $(this).data("background") + ".png')");
        });
        var queryString = getQueryString();
        var page = queryString.page;
        if (page != null && page !== "") {
            $(".activities")
                .each(function () {
                pages.renderActivityPage($(this), page);
            });
        }
        else {
            $(".activities")
                .each(function () {
                pages.renderActivities($(this));
            });
        }
    });
    function getQueryString() {
        var queryString = {};
        $.each(document.location.search.substr(1).split("&"), function (c, q) {
            var i = q.split("=");
            if (i[0] != null && i[1] != null) {
                queryString[i[0].toString()] = i[1].toString();
            }
        });
        return queryString;
    }
    var Pages = (function () {
        function Pages(folder) {
            this.folder = folder;
        }
        Pages.prototype.render = function (element) {
            $.get(this.folder + "/" + element.data("page") + ".html", function (data) {
                element.html(data);
            });
        };
        Pages.prototype.renderActivities = function (element) {
            var _this = this;
            var innerElement = $("<div class='row'></div>");
            element.html(innerElement);
            $.get(this.folder + "/activiteiten.json", function (data) {
                for (var i = 0; i < data.activities.length; i++) {
                    _this.renderActivity(innerElement, data.activities[i].name, data.activities[i].title);
                }
            });
        };
        Pages.prototype.renderActivity = function (element, activityname, activitytitle) {
            $.get(this.folder + ("/activiteiten/descriptions/" + activityname + ".html"), function (data) {
                element.append("<div class='col-xs-12 activity'>\n                    <div class='activity-image' style='background-image: url(pages/activiteiten/images/" + activityname + ".png);'></div>\n                    <div class='activity-description'>\n                        <h1>\n                            <a href='activiteiten.html?page=" + activityname + "'>" + activitytitle + "</a>\n                        </h1>\n                        <p>\n                            " + data + "\n                            <a href='activiteiten.html?page=" + activityname + "'>lees meer</a>\n                        </p>\n                    </div>\n                </div>");
            });
        };
        Pages.prototype.renderActivityPage = function (element, activityname) {
            $.get(this.folder + ("/activiteiten/pages/" + activityname + ".html"), function (data) {
                element.html(data);
                element.append("<p>Ben je nieuwsgierig geworden en wil je meedoen, of heb je vragen? Bel of <a href='mailto:info@daarwordikstilvan.nl'>mail</a> dan gerust!</p>");
                element.addClass("jumbotron");
            });
        };
        return Pages;
    }());
})(jQuery));
function sendEmail(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var message = $("#message").val();
    var valid = true;
    if (name.length === 0) {
        $("#namevalid").html("Vul a.u.b. uw naam in.");
        valid = false;
    }
    else {
        $("#namevalid").html("");
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#emailvalid").html("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    else {
        $("#emailvalid").html("");
    }
    if (message.length === 0) {
        $("#messagevalid").html("Vul a.u.b. een bericht in.");
        valid = false;
    }
    else {
        $("#messagevalid").html("");
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("Versturen...");
    var request = {
        name: name,
        email: email,
        message: message
    };
    var requestData = JSON.stringify(request);
    $.post("api/email.php", requestData, function (responseData) {
        if (responseData) {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht is verzonden.</p>");
        }
        else {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht kon niet verzonden worden, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}
function subscribeToNewsletter(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var valid = true;
    $("#valid").html("");
    if (name.length === 0) {
        $("#valid").append("Vul a.u.b. uw naam in.<br />");
        valid = false;
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#valid").append("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("Aanmelden...");
    var request = {
        name: name,
        email: email
    };
    var requestData = JSON.stringify(request);
    $.post("api/newsletter.php", requestData, function (responseData) {
        if (responseData) {
            $("#newsletterform").html("<h1>Nieuwsbrief</h1><p>U bent ingeschreven voor de nieuwsbrief.</p>");
        }
        else {
            $("#newsletterform").html("<h1>Contact</h1><p>U kunt op het moment niet worden ingeschreven, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}

//# sourceMappingURL=data:application/json;base64,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Q0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxXQUFXLEVBQUUsVUFBQSxZQUFZO1FBQ2xELEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDZixDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMscUVBQXFFLENBQUMsQ0FBQztRQUNyRyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMseUdBQXlHLENBQUMsQ0FBQztRQUN6SSxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDIiwiZmlsZSI6ImNvbnRlbnQvanMvc2l0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLzxyZWZlcmVuY2UgcGF0aD1cInR5cGluZ3MvanF1ZXJ5LmQudHNcIi8+XHJcblxyXG4oKCQgPT4ge1xyXG4gICAgJCgoKSA9PiB7XHJcbiAgICAgICAgdmFyIHBhZ2VzID0gbmV3IFBhZ2VzKFwicGFnZXNcIik7XHJcbiAgICAgICAgJChcImRpdltkYXRhLXBhZ2VdXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VzLnJlbmRlcigkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCJib2R5W2RhdGEtYmFja2dyb3VuZF1cIilcclxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIGB1cmwoJ2NvbnRlbnQvaW1hZ2VzLyR7JCh0aGlzKS5kYXRhKFwiYmFja2dyb3VuZFwiKX0ucG5nJylgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IGdldFF1ZXJ5U3RyaW5nKCk7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSBxdWVyeVN0cmluZy5wYWdlO1xyXG4gICAgICAgIGlmIChwYWdlICE9IG51bGwgJiYgcGFnZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAkKFwiLmFjdGl2aXRpZXNcIilcclxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlcy5yZW5kZXJBY3Rpdml0eVBhZ2UoJCh0aGlzKSwgcGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiLmFjdGl2aXRpZXNcIilcclxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlcy5yZW5kZXJBY3Rpdml0aWVzKCQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UXVlcnlTdHJpbmcoKTogYW55IHtcclxuICAgICAgICB2YXIgcXVlcnlTdHJpbmc6IGFueSA9IHt9O1xyXG4gICAgICAgICQuZWFjaChkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLnNwbGl0KFwiJlwiKSwgKGMsIHEpID0+IHtcclxuICAgICAgICAgICAgdmFyIGkgPSBxLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgaWYgKGlbMF0gIT0gbnVsbCAmJiBpWzFdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nW2lbMF0udG9TdHJpbmcoKV0gPSBpWzFdLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIFBhZ2VzIHtcclxuICAgICAgICBmb2xkZXI6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZm9sZGVyOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXIoZWxlbWVudDogSlF1ZXJ5KSB7XHJcbiAgICAgICAgICAgICQuZ2V0KHRoaXMuZm9sZGVyICsgXCIvXCIgKyBlbGVtZW50LmRhdGEoXCJwYWdlXCIpICsgXCIuaHRtbFwiLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXJBY3Rpdml0aWVzKGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgICAgICB2YXIgaW5uZXJFbGVtZW50ID0gJChcIjxkaXYgY2xhc3M9J3Jvdyc+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50Lmh0bWwoaW5uZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgJC5nZXQodGhpcy5mb2xkZXIgKyBcIi9hY3Rpdml0ZWl0ZW4uanNvblwiLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5hY3Rpdml0aWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJBY3Rpdml0eShpbm5lckVsZW1lbnQsIGRhdGEuYWN0aXZpdGllc1tpXS5uYW1lLCBkYXRhLmFjdGl2aXRpZXNbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckFjdGl2aXR5KGVsZW1lbnQ6IEpRdWVyeSwgYWN0aXZpdHluYW1lOiBzdHJpbmcsIGFjdGl2aXR5dGl0bGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAkLmdldCh0aGlzLmZvbGRlciArIGAvYWN0aXZpdGVpdGVuL2Rlc2NyaXB0aW9ucy8ke2FjdGl2aXR5bmFtZX0uaHRtbGAsIGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoYDxkaXYgY2xhc3M9J2NvbC14cy0xMiBhY3Rpdml0eSc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYWN0aXZpdHktaW1hZ2UnIHN0eWxlPSdiYWNrZ3JvdW5kLWltYWdlOiB1cmwocGFnZXMvYWN0aXZpdGVpdGVuL2ltYWdlcy8ke2FjdGl2aXR5bmFtZX0ucG5nKTsnPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J2FjdGl2aXR5LWRlc2NyaXB0aW9uJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0nYWN0aXZpdGVpdGVuLmh0bWw/cGFnZT0ke2FjdGl2aXR5bmFtZX0nPiR7YWN0aXZpdHl0aXRsZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0nYWN0aXZpdGVpdGVuLmh0bWw/cGFnZT0ke2FjdGl2aXR5bmFtZX0nPmxlZXMgbWVlcjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+YCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyQWN0aXZpdHlQYWdlKGVsZW1lbnQ6IEpRdWVyeSwgYWN0aXZpdHluYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgJC5nZXQodGhpcy5mb2xkZXIgKyBgL2FjdGl2aXRlaXRlbi9wYWdlcy8ke2FjdGl2aXR5bmFtZX0uaHRtbGAsIGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoXCI8cD5CZW4gamUgbmlldXdzZ2llcmlnIGdld29yZGVuIGVuIHdpbCBqZSBtZWVkb2VuLCBvZiBoZWIgamUgdnJhZ2VuPyBCZWwgb2YgPGEgaHJlZj0nbWFpbHRvOmluZm9AZGFhcndvcmRpa3N0aWx2YW4ubmwnPm1haWw8L2E+IGRhbiBnZXJ1c3QhPC9wPlwiKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoXCJqdW1ib3Ryb25cIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoalF1ZXJ5KSk7XHJcblxyXG5mdW5jdGlvbiBzZW5kRW1haWwoZWxlbWVudDogYW55KTogYW55IHtcclxuICAgIHZhciBidXR0b24gPSAkKGVsZW1lbnQpO1xyXG4gICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XHJcbiAgICB2YXIgZW1haWwgPSAkKFwiI2VtYWlsXCIpLnZhbCgpO1xyXG4gICAgdmFyIG1lc3NhZ2UgPSAkKFwiI21lc3NhZ2VcIikudmFsKCk7XHJcblxyXG4gICAgdmFyIHZhbGlkID0gdHJ1ZTtcclxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICQoXCIjbmFtZXZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIHV3IG5hYW0gaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjbmFtZXZhbGlkXCIpLmh0bWwoXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVtYWlsLmxlbmd0aCA9PT0gMCB8fCBlbWFpbC5pbmRleE9mKFwiQFwiKSA9PT0gLTEgfHwgZW1haWwuaW5kZXhPZihcIi5cIikgPT09IC0xKSB7XHJcbiAgICAgICAgJChcIiNlbWFpbHZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIGVlbiBnZWxkaWcgZS1tYWlsYWRyZXMgaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjZW1haWx2YWxpZFwiKS5odG1sKFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtZXNzYWdlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICQoXCIjbWVzc2FnZXZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIGVlbiBiZXJpY2h0IGluLlwiKTtcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiI21lc3NhZ2V2YWxpZFwiKS5odG1sKFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIGJ1dHRvbi50ZXh0KFwiVmVyc3R1cmVuLi4uXCIpO1xyXG5cclxuICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcclxuICAgIH07XHJcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KTtcclxuICAgICQucG9zdChcImFwaS9lbWFpbC5waHBcIiwgcmVxdWVzdERhdGEsIHJlc3BvbnNlRGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICAkKFwiI2NvbnRhY3Rmb3JtXCIpLmh0bWwoXCI8aDE+Q29udGFjdDwvaDE+PHA+VXcgYmVyaWNodCBpcyB2ZXJ6b25kZW4uPC9wPlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiI2NvbnRhY3Rmb3JtXCIpLmh0bWwoXCI8aDE+Q29udGFjdDwvaDE+PHA+VXcgYmVyaWNodCBrb24gbmlldCB2ZXJ6b25kZW4gd29yZGVuLCBwcm9iZWVyIGhldCBsYXRlciBhLnUuYi4gb3BuaWV1dy48L3A+XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzY3JpYmVUb05ld3NsZXR0ZXIoZWxlbWVudDogYW55KTogYW55IHtcclxuICAgIHZhciBidXR0b24gPSAkKGVsZW1lbnQpO1xyXG4gICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XHJcbiAgICB2YXIgZW1haWwgPSAkKFwiI2VtYWlsXCIpLnZhbCgpO1xyXG5cclxuICAgIHZhciB2YWxpZCA9IHRydWU7XHJcbiAgICAkKFwiI3ZhbGlkXCIpLmh0bWwoXCJcIik7XHJcblxyXG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgJChcIiN2YWxpZFwiKS5hcHBlbmQoXCJWdWwgYS51LmIuIHV3IG5hYW0gaW4uPGJyIC8+XCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVtYWlsLmxlbmd0aCA9PT0gMCB8fCBlbWFpbC5pbmRleE9mKFwiQFwiKSA9PT0gLTEgfHwgZW1haWwuaW5kZXhPZihcIi5cIikgPT09IC0xKSB7XHJcbiAgICAgICAgJChcIiN2YWxpZFwiKS5hcHBlbmQoXCJWdWwgYS51LmIuIGVlbiBnZWxkaWcgZS1tYWlsYWRyZXMgaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b24ucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgYnV0dG9uLnRleHQoXCJBYW5tZWxkZW4uLi5cIik7XHJcblxyXG4gICAgdmFyIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBlbWFpbDogZW1haWxcclxuICAgIH07XHJcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KTtcclxuICAgICQucG9zdChcImFwaS9uZXdzbGV0dGVyLnBocFwiLCByZXF1ZXN0RGF0YSwgcmVzcG9uc2VEYXRhID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgICQoXCIjbmV3c2xldHRlcmZvcm1cIikuaHRtbChcIjxoMT5OaWV1d3NicmllZjwvaDE+PHA+VSBiZW50IGluZ2VzY2hyZXZlbiB2b29yIGRlIG5pZXV3c2JyaWVmLjwvcD5cIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChcIiNuZXdzbGV0dGVyZm9ybVwiKS5odG1sKFwiPGgxPkNvbnRhY3Q8L2gxPjxwPlUga3VudCBvcCBoZXQgbW9tZW50IG5pZXQgd29yZGVuIGluZ2VzY2hyZXZlbiwgcHJvYmVlciBoZXQgbGF0ZXIgYS51LmIuIG9wbmlldXcuPC9wPlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
