((function ($) {
    $(function () {
        var pages = new Pages("pages");
        $("div[data-page]")
            .each(function () {
            pages.render($(this));
        });
        $("body[data-background]")
            .each(function () {
            $(this).css("background-image", "url('content/images/" + $(this).data("background") + ".png')");
        });
        var queryString = getQueryString();
        var page = queryString.page;
        if (page != null && page !== "") {
            $(".activities")
                .each(function () {
                pages.renderActivityPage($(this), page);
            });
        }
        else {
            $(".activities")
                .each(function () {
                pages.renderActivities($(this));
            });
        }
    });
    function getQueryString() {
        var queryString = {};
        $.each(document.location.search.substr(1).split("&"), function (c, q) {
            var i = q.split("=");
            if (i[0] != null && i[1] != null) {
                queryString[i[0].toString()] = i[1].toString();
            }
        });
        return queryString;
    }
    var Pages = (function () {
        function Pages(folder) {
            this.folder = folder;
        }
        Pages.prototype.render = function (element) {
            $.get(this.folder + "/" + element.data("page") + ".html", function (data) {
                element.html(data);
            });
        };
        Pages.prototype.renderActivities = function (element) {
            var _this = this;
            var innerElement = $("<div class='row'></div>");
            $.get(this.folder + "/activiteiten.json", function (data) {
                for (var i = 0; i < data.activities.length; i++) {
                    _this.renderActivity(innerElement, data.activities[i].name, data.activities[i].title);
                }
            });
            element.empty().append(innerElement);
        };
        Pages.prototype.renderActivity = function (element, activityname, activitytitle) {
            $.get(this.folder + ("/activiteiten/descriptions/" + activityname + ".html"), function (data) {
                element.append("<div class='col-xs-12 activity'>\n                    <div class='activity-image' style='background-image: url(pages/activiteiten/images/" + activityname + ".png);'></div>\n                    <div class='activity-description see-through'>\n                        <h1>\n                            <a href='activiteiten.html?page=" + activityname + "'>" + activitytitle + "</a>\n                        </h1>\n                        <p>\n                            " + data + "\n                            <a href='activiteiten.html?page=" + activityname + "'>lees meer</a>\n                        </p>\n                    </div>\n                </div>");
            });
        };
        Pages.prototype.renderActivityPage = function (element, activityname) {
            $.get(this.folder + ("/activiteiten/pages/" + activityname + ".html"), function (data) {
                element.html(data);
                element.addClass("jumbotron");
            });
        };
        return Pages;
    }());
})(jQuery));
function sendEmail(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var message = $("#message").val();
    var valid = true;
    if (name.length === 0) {
        $("#namevalid").html("Vul a.u.b. uw naam in.");
        valid = false;
    }
    else {
        $("#namevalid").html("");
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#emailvalid").html("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    else {
        $("#emailvalid").html("");
    }
    if (message.length === 0) {
        $("#messagevalid").html("Vul a.u.b. een bericht in.");
        valid = false;
    }
    else {
        $("#messagevalid").html("");
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("Uw bericht wordt verstuurd...");
    var request = {
        name: name,
        email: email,
        message: message
    };
    var requestData = JSON.stringify(request);
    $.post("api/email.php", requestData, function (responseData) {
        if (responseData) {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht is verzonden.</p>");
        }
        else {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht kon niet verzonden worden, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}
function subscribeToNewsletter(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var valid = true;
    $("#valid").html("");
    if (name.length === 0) {
        $("#valid").append("Vul a.u.b. uw naam in.<br />");
        valid = false;
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#valid").append("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("U wordt aangemeld...");
    var request = {
        name: name,
        email: email
    };
    var requestData = JSON.stringify(request);
    $.post("api/newsletter.php", requestData, function (responseData) {
        if (responseData) {
            $("#newsletterform").html("<h1>Nieuwsbrief</h1><p>U bent ingeschreven voor de nieuwsbrief.</p>");
        }
        else {
            $("#newsletterform").html("<h1>Contact</h1><p>U kunt op het moment niet worden ingeschreven, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRlbnQvdHMvc2l0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxDQUFDLENBQUMsVUFBQSxDQUFDO0lBQ0MsQ0FBQyxDQUFDO1FBQ0UsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO2FBQ2QsSUFBSSxDQUFDO1lBQ0YsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMxQixDQUFDLENBQUMsQ0FBQztRQUVQLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQzthQUNyQixJQUFJLENBQUM7WUFDRixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLHlCQUF1QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFRLENBQUMsQ0FBQztRQUMvRixDQUFDLENBQUMsQ0FBQztRQUVQLElBQUksV0FBVyxHQUFHLGNBQWMsRUFBRSxDQUFDO1FBQ25DLElBQUksSUFBSSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUM7UUFDNUIsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5QixDQUFDLENBQUMsYUFBYSxDQUFDO2lCQUNYLElBQUksQ0FBQztnQkFDRixLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osQ0FBQyxDQUFDLGFBQWEsQ0FBQztpQkFDWCxJQUFJLENBQUM7Z0JBQ0YsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLENBQUMsQ0FBQyxDQUFDO1FBQ1gsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUg7UUFDSSxJQUFJLFdBQVcsR0FBUSxFQUFFLENBQUM7UUFDMUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLFVBQUMsQ0FBQyxFQUFFLENBQUM7WUFDdkQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUMvQixXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ25ELENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVEO1FBR0ksZUFBWSxNQUFjO1lBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3pCLENBQUM7UUFFRCxzQkFBTSxHQUFOLFVBQU8sT0FBZTtZQUNsQixDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxFQUFFLFVBQUEsSUFBSTtnQkFDMUQsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QixDQUFDLENBQUMsQ0FBQztRQUNQLENBQUM7UUFFRCxnQ0FBZ0IsR0FBaEIsVUFBaUIsT0FBZTtZQUFoQyxpQkFRQztZQVBHLElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ2hELENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxvQkFBb0IsRUFBRSxVQUFBLElBQUk7Z0JBQzFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztvQkFDOUMsS0FBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDekYsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ0gsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBRUQsOEJBQWMsR0FBZCxVQUFlLE9BQWUsRUFBRSxZQUFvQixFQUFFLGFBQXFCO1lBQ3ZFLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxpQ0FBOEIsWUFBWSxXQUFPLEVBQUUsVUFBQSxJQUFJO2dCQUN2RSxPQUFPLENBQUMsTUFBTSxDQUFDLDhJQUMwRSxZQUFZLHNMQUd2RCxZQUFZLFVBQUssYUFBYSxzR0FHOUQsSUFBSSxzRUFDNEIsWUFBWSxzR0FHbkQsQ0FBQyxDQUFDO1lBQ2IsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBRUQsa0NBQWtCLEdBQWxCLFVBQW1CLE9BQWUsRUFBRSxZQUFvQjtZQUNwRCxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsMEJBQXVCLFlBQVksV0FBTyxFQUFFLFVBQUEsSUFBSTtnQkFDaEUsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbkIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUM7UUFDTCxZQUFDO0lBQUQsQ0E5Q0EsQUE4Q0MsSUFBQTtBQUNMLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFFWixtQkFBbUIsT0FBWTtJQUMzQixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDeEIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzVCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUM5QixJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFFbEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ2pCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFDL0MsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNsQixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9FLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsdUNBQXVDLENBQUMsQ0FBQztRQUMvRCxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ2xCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUM7UUFDdEQsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNsQixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDVCxNQUFNLENBQUM7SUFDWCxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0lBRTdDLElBQUksT0FBTyxHQUFHO1FBQ1YsSUFBSSxFQUFFLElBQUk7UUFDVixLQUFLLEVBQUUsS0FBSztRQUNaLE9BQU8sRUFBRSxPQUFPO0tBQ25CLENBQUM7SUFDRixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFdBQVcsRUFBRSxVQUFBLFlBQVk7UUFDN0MsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNmLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsaURBQWlELENBQUMsQ0FBQztRQUM5RSxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLGdHQUFnRyxDQUFDLENBQUM7UUFDN0gsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELCtCQUErQixPQUFZO0lBQ3ZDLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4QixJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDNUIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBRTlCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztJQUNqQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRXJCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLDhCQUE4QixDQUFDLENBQUM7UUFDbkQsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNsQixDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLHVDQUF1QyxDQUFDLENBQUM7UUFDNUQsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNsQixDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ1QsTUFBTSxDQUFDO0lBQ1gsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVwQyxJQUFJLE9BQU8sR0FBRztRQUNWLElBQUksRUFBRSxJQUFJO1FBQ1YsS0FBSyxFQUFFLEtBQUs7S0FDZixDQUFDO0lBQ0YsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFdBQVcsRUFBRSxVQUFBLFlBQVk7UUFDbEQsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNmLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxxRUFBcUUsQ0FBQyxDQUFDO1FBQ3JHLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyx5R0FBeUcsQ0FBQyxDQUFDO1FBQ3pJLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMiLCJmaWxlIjoiY29udGVudC9qcy9zaXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vPHJlZmVyZW5jZSBwYXRoPVwidHlwaW5ncy9qcXVlcnkuZC50c1wiLz5cclxuXHJcbigoJCA9PiB7XHJcbiAgICAkKCgpID0+IHtcclxuICAgICAgICB2YXIgcGFnZXMgPSBuZXcgUGFnZXMoXCJwYWdlc1wiKTtcclxuICAgICAgICAkKFwiZGl2W2RhdGEtcGFnZV1cIilcclxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGFnZXMucmVuZGVyKCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcImJvZHlbZGF0YS1iYWNrZ3JvdW5kXVwiKVxyXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIiwgYHVybCgnY29udGVudC9pbWFnZXMvJHskKHRoaXMpLmRhdGEoXCJiYWNrZ3JvdW5kXCIpfS5wbmcnKWApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gZ2V0UXVlcnlTdHJpbmcoKTtcclxuICAgICAgICB2YXIgcGFnZSA9IHF1ZXJ5U3RyaW5nLnBhZ2U7XHJcbiAgICAgICAgaWYgKHBhZ2UgIT0gbnVsbCAmJiBwYWdlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICQoXCIuYWN0aXZpdGllc1wiKVxyXG4gICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzLnJlbmRlckFjdGl2aXR5UGFnZSgkKHRoaXMpLCBwYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoXCIuYWN0aXZpdGllc1wiKVxyXG4gICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzLnJlbmRlckFjdGl2aXRpZXMoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRRdWVyeVN0cmluZygpOiBhbnkge1xyXG4gICAgICAgIHZhciBxdWVyeVN0cmluZzogYW55ID0ge307XHJcbiAgICAgICAgJC5lYWNoKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkuc3BsaXQoXCImXCIpLCAoYywgcSkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgaSA9IHEuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAoaVswXSAhPSBudWxsICYmIGlbMV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlTdHJpbmdbaVswXS50b1N0cmluZygpXSA9IGlbMV0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgUGFnZXMge1xyXG4gICAgICAgIGZvbGRlcjogc3RyaW5nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGZvbGRlcjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9sZGVyID0gZm9sZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgICAgICAkLmdldCh0aGlzLmZvbGRlciArIFwiL1wiICsgZWxlbWVudC5kYXRhKFwicGFnZVwiKSArIFwiLmh0bWxcIiwgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyQWN0aXZpdGllcyhlbGVtZW50OiBKUXVlcnkpIHtcclxuICAgICAgICAgICAgdmFyIGlubmVyRWxlbWVudCA9ICQoXCI8ZGl2IGNsYXNzPSdyb3cnPjwvZGl2PlwiKTtcclxuICAgICAgICAgICAgJC5nZXQodGhpcy5mb2xkZXIgKyBcIi9hY3Rpdml0ZWl0ZW4uanNvblwiLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5hY3Rpdml0aWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJBY3Rpdml0eShpbm5lckVsZW1lbnQsIGRhdGEuYWN0aXZpdGllc1tpXS5uYW1lLCBkYXRhLmFjdGl2aXRpZXNbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxlbWVudC5lbXB0eSgpLmFwcGVuZChpbm5lckVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyQWN0aXZpdHkoZWxlbWVudDogSlF1ZXJ5LCBhY3Rpdml0eW5hbWU6IHN0cmluZywgYWN0aXZpdHl0aXRsZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICQuZ2V0KHRoaXMuZm9sZGVyICsgYC9hY3Rpdml0ZWl0ZW4vZGVzY3JpcHRpb25zLyR7YWN0aXZpdHluYW1lfS5odG1sYCwgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChgPGRpdiBjbGFzcz0nY29sLXhzLTEyIGFjdGl2aXR5Jz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdhY3Rpdml0eS1pbWFnZScgc3R5bGU9J2JhY2tncm91bmQtaW1hZ2U6IHVybChwYWdlcy9hY3Rpdml0ZWl0ZW4vaW1hZ2VzLyR7YWN0aXZpdHluYW1lfS5wbmcpOyc+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0nYWN0aXZpdHktZGVzY3JpcHRpb24gc2VlLXRocm91Z2gnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdhY3Rpdml0ZWl0ZW4uaHRtbD9wYWdlPSR7YWN0aXZpdHluYW1lfSc+JHthY3Rpdml0eXRpdGxlfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2RhdGF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdhY3Rpdml0ZWl0ZW4uaHRtbD9wYWdlPSR7YWN0aXZpdHluYW1lfSc+bGVlcyBtZWVyPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlbmRlckFjdGl2aXR5UGFnZShlbGVtZW50OiBKUXVlcnksIGFjdGl2aXR5bmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICQuZ2V0KHRoaXMuZm9sZGVyICsgYC9hY3Rpdml0ZWl0ZW4vcGFnZXMvJHthY3Rpdml0eW5hbWV9Lmh0bWxgLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoXCJqdW1ib3Ryb25cIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoalF1ZXJ5KSk7XHJcblxyXG5mdW5jdGlvbiBzZW5kRW1haWwoZWxlbWVudDogYW55KTogYW55IHtcclxuICAgIHZhciBidXR0b24gPSAkKGVsZW1lbnQpO1xyXG4gICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XHJcbiAgICB2YXIgZW1haWwgPSAkKFwiI2VtYWlsXCIpLnZhbCgpO1xyXG4gICAgdmFyIG1lc3NhZ2UgPSAkKFwiI21lc3NhZ2VcIikudmFsKCk7XHJcblxyXG4gICAgdmFyIHZhbGlkID0gdHJ1ZTtcclxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICQoXCIjbmFtZXZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIHV3IG5hYW0gaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjbmFtZXZhbGlkXCIpLmh0bWwoXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVtYWlsLmxlbmd0aCA9PT0gMCB8fCBlbWFpbC5pbmRleE9mKFwiQFwiKSA9PT0gLTEgfHwgZW1haWwuaW5kZXhPZihcIi5cIikgPT09IC0xKSB7XHJcbiAgICAgICAgJChcIiNlbWFpbHZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIGVlbiBnZWxkaWcgZS1tYWlsYWRyZXMgaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoXCIjZW1haWx2YWxpZFwiKS5odG1sKFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtZXNzYWdlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICQoXCIjbWVzc2FnZXZhbGlkXCIpLmh0bWwoXCJWdWwgYS51LmIuIGVlbiBiZXJpY2h0IGluLlwiKTtcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiI21lc3NhZ2V2YWxpZFwiKS5odG1sKFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIGJ1dHRvbi50ZXh0KFwiVXcgYmVyaWNodCB3b3JkdCB2ZXJzdHV1cmQuLi5cIik7XHJcblxyXG4gICAgdmFyIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxyXG4gICAgfTtcclxuICAgIHZhciByZXF1ZXN0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpO1xyXG4gICAgJC5wb3N0KFwiYXBpL2VtYWlsLnBocFwiLCByZXF1ZXN0RGF0YSwgcmVzcG9uc2VEYXRhID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgICQoXCIjY29udGFjdGZvcm1cIikuaHRtbChcIjxoMT5Db250YWN0PC9oMT48cD5VdyBiZXJpY2h0IGlzIHZlcnpvbmRlbi48L3A+XCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoXCIjY29udGFjdGZvcm1cIikuaHRtbChcIjxoMT5Db250YWN0PC9oMT48cD5VdyBiZXJpY2h0IGtvbiBuaWV0IHZlcnpvbmRlbiB3b3JkZW4sIHByb2JlZXIgaGV0IGxhdGVyIGEudS5iLiBvcG5pZXV3LjwvcD5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1YnNjcmliZVRvTmV3c2xldHRlcihlbGVtZW50OiBhbnkpOiBhbnkge1xyXG4gICAgdmFyIGJ1dHRvbiA9ICQoZWxlbWVudCk7XHJcbiAgICB2YXIgbmFtZSA9ICQoXCIjbmFtZVwiKS52YWwoKTtcclxuICAgIHZhciBlbWFpbCA9ICQoXCIjZW1haWxcIikudmFsKCk7XHJcblxyXG4gICAgdmFyIHZhbGlkID0gdHJ1ZTtcclxuICAgICQoXCIjdmFsaWRcIikuaHRtbChcIlwiKTtcclxuXHJcbiAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkKFwiI3ZhbGlkXCIpLmFwcGVuZChcIlZ1bCBhLnUuYi4gdXcgbmFhbSBpbi48YnIgLz5cIik7XHJcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW1haWwubGVuZ3RoID09PSAwIHx8IGVtYWlsLmluZGV4T2YoXCJAXCIpID09PSAtMSB8fCBlbWFpbC5pbmRleE9mKFwiLlwiKSA9PT0gLTEpIHtcclxuICAgICAgICAkKFwiI3ZhbGlkXCIpLmFwcGVuZChcIlZ1bCBhLnUuYi4gZWVuIGdlbGRpZyBlLW1haWxhZHJlcyBpbi5cIik7XHJcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbi5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICBidXR0b24udGV4dChcIlUgd29yZHQgYWFuZ2VtZWxkLi4uXCIpO1xyXG5cclxuICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICB9O1xyXG4gICAgdmFyIHJlcXVlc3REYXRhID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdCk7XHJcbiAgICAkLnBvc3QoXCJhcGkvbmV3c2xldHRlci5waHBcIiwgcmVxdWVzdERhdGEsIHJlc3BvbnNlRGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICAkKFwiI25ld3NsZXR0ZXJmb3JtXCIpLmh0bWwoXCI8aDE+TmlldXdzYnJpZWY8L2gxPjxwPlUgYmVudCBpbmdlc2NocmV2ZW4gdm9vciBkZSBuaWV1d3NicmllZi48L3A+XCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoXCIjbmV3c2xldHRlcmZvcm1cIikuaHRtbChcIjxoMT5Db250YWN0PC9oMT48cD5VIGt1bnQgb3AgaGV0IG1vbWVudCBuaWV0IHdvcmRlbiBpbmdlc2NocmV2ZW4sIHByb2JlZXIgaGV0IGxhdGVyIGEudS5iLiBvcG5pZXV3LjwvcD5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0iXX0=
