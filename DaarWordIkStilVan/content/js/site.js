((function ($) {
    $(function () {
        var pages = new Pages("pages");
        $("div[data-page]")
            .each(function () {
            pages.render($(this));
        });
        $("body[data-background]")
            .each(function () {
            $(this).css("background-image", "url('content/images/" + $(this).data("background") + ".png')");
        });
        var queryString = getQueryString();
        var page = queryString.page;
        if (page != null && page !== "") {
            $(".activities")
                .each(function () {
                pages.renderActivityPage($(this), page);
            });
        }
        else {
            $(".activities")
                .each(function () {
                pages.renderActivities($(this));
            });
        }
    });
    function getQueryString() {
        var queryString = {};
        $.each(document.location.search.substr(1).split("&"), function (c, q) {
            var i = q.split("=");
            if (i[0] != null && i[1] != null) {
                queryString[i[0].toString()] = i[1].toString();
            }
        });
        return queryString;
    }
    var Pages = (function () {
        function Pages(folder) {
            this.folder = folder;
        }
        Pages.prototype.render = function (element) {
            $.get(this.folder + "/" + element.data("page") + ".html", function (data) {
                element.html(data);
            });
        };
        Pages.prototype.renderActivities = function (element) {
            var _this = this;
            var innerElement = $("<div class='row'></div>");
            element.html(innerElement);
            $.get(this.folder + "/activiteiten.json", function (data) {
                for (var i = 0; i < data.activities.length; i++) {
                    _this.renderActivity(innerElement, data.activities[i].name, data.activities[i].title);
                }
            });
        };
        Pages.prototype.renderActivity = function (element, activityname, activitytitle) {
            $.get(this.folder + ("/activiteiten/descriptions/" + activityname + ".html"), function (data) {
                element.append("<div class='col-xs-12 activity'>\n                    <div class='activity-image' style='background-image: url(pages/activiteiten/images/" + activityname + ".png);'></div>\n                    <div class='activity-description'>\n                        <h1>\n                            <a href='activiteiten.html?page=" + activityname + "'>" + activitytitle + "</a>\n                        </h1>\n                        <p>\n                            " + data + "\n                            <a href='activiteiten.html?page=" + activityname + "'>lees meer</a>\n                        </p>\n                    </div>\n                </div>");
            });
        };
        Pages.prototype.renderActivityPage = function (element, activityname) {
            $.get(this.folder + ("/activiteiten/pages/" + activityname + ".html"), function (data) {
                element.html(data);
                element.append("<p>Ben je nieuwsgierig geworden en wil je meedoen, of heb je vragen? Bel of <a href='mailto:info@daarwordikstilvan.nl'>mail</a> dan gerust!</p>");
                element.addClass("jumbotron");
            });
        };
        return Pages;
    }());
})(jQuery));
function sendEmail(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var message = $("#message").val();
    var valid = true;
    if (name.length === 0) {
        $("#namevalid").html("Vul a.u.b. uw naam in.");
        valid = false;
    }
    else {
        $("#namevalid").html("");
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#emailvalid").html("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    else {
        $("#emailvalid").html("");
    }
    if (message.length === 0) {
        $("#messagevalid").html("Vul a.u.b. een bericht in.");
        valid = false;
    }
    else {
        $("#messagevalid").html("");
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("Uw bericht wordt verstuurd...");
    var request = {
        name: name,
        email: email,
        message: message
    };
    var requestData = JSON.stringify(request);
    $.post("api/email.php", requestData, function (responseData) {
        if (responseData) {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht is verzonden.</p>");
        }
        else {
            $("#contactform").html("<h1>Contact</h1><p>Uw bericht kon niet verzonden worden, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}
function subscribeToNewsletter(element) {
    var button = $(element);
    var name = $("#name").val();
    var email = $("#email").val();
    var valid = true;
    $("#valid").html("");
    if (name.length === 0) {
        $("#valid").append("Vul a.u.b. uw naam in.<br />");
        valid = false;
    }
    if (email.length === 0 || email.indexOf("@") === -1 || email.indexOf(".") === -1) {
        $("#valid").append("Vul a.u.b. een geldig e-mailadres in.");
        valid = false;
    }
    if (!valid) {
        return;
    }
    button.prop("disabled", true);
    button.text("U wordt aangemeld...");
    var request = {
        name: name,
        email: email
    };
    var requestData = JSON.stringify(request);
    $.post("api/newsletter.php", requestData, function (responseData) {
        if (responseData) {
            $("#newsletterform").html("<h1>Nieuwsbrief</h1><p>U bent ingeschreven voor de nieuwsbrief.</p>");
        }
        else {
            $("#newsletterform").html("<h1>Contact</h1><p>U kunt op het moment niet worden ingeschreven, probeer het later a.u.b. opnieuw.</p>");
        }
    });
}

//# sourceMappingURL=data:application/json;base64,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QUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsV0FBVyxFQUFFLFVBQUEsWUFBWTtRQUNsRCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2YsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLHFFQUFxRSxDQUFDLENBQUM7UUFDckcsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLHlHQUF5RyxDQUFDLENBQUM7UUFDekksQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsImZpbGUiOiJjb250ZW50L2pzL3NpdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHBhdGg9XCJ0eXBpbmdzL2pxdWVyeS5kLnRzXCIvPlxyXG5cclxuKCgkID0+IHtcclxuICAgICQoKCkgPT4ge1xyXG4gICAgICAgIHZhciBwYWdlcyA9IG5ldyBQYWdlcyhcInBhZ2VzXCIpO1xyXG4gICAgICAgICQoXCJkaXZbZGF0YS1wYWdlXVwiKVxyXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlcy5yZW5kZXIoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiYm9keVtkYXRhLWJhY2tncm91bmRdXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBgdXJsKCdjb250ZW50L2ltYWdlcy8keyQodGhpcykuZGF0YShcImJhY2tncm91bmRcIil9LnBuZycpYCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBnZXRRdWVyeVN0cmluZygpO1xyXG4gICAgICAgIHZhciBwYWdlID0gcXVlcnlTdHJpbmcucGFnZTtcclxuICAgICAgICBpZiAocGFnZSAhPSBudWxsICYmIHBhZ2UgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgJChcIi5hY3Rpdml0aWVzXCIpXHJcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXMucmVuZGVyQWN0aXZpdHlQYWdlKCQodGhpcyksIHBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChcIi5hY3Rpdml0aWVzXCIpXHJcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXMucmVuZGVyQWN0aXZpdGllcygkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldFF1ZXJ5U3RyaW5nKCk6IGFueSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nOiBhbnkgPSB7fTtcclxuICAgICAgICAkLmVhY2goZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKS5zcGxpdChcIiZcIiksIChjLCBxKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpID0gcS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgICAgIGlmIChpWzBdICE9IG51bGwgJiYgaVsxXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVN0cmluZ1tpWzBdLnRvU3RyaW5nKCldID0gaVsxXS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBxdWVyeVN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBjbGFzcyBQYWdlcyB7XHJcbiAgICAgICAgZm9sZGVyOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGZvbGRlcjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9sZGVyID0gZm9sZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKGVsZW1lbnQ6IEpRdWVyeSkge1xyXG4gICAgICAgICAgICAkLmdldCh0aGlzLmZvbGRlciArIFwiL1wiICsgZWxlbWVudC5kYXRhKFwicGFnZVwiKSArIFwiLmh0bWxcIiwgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyQWN0aXZpdGllcyhlbGVtZW50OiBKUXVlcnkpIHtcclxuICAgICAgICAgICAgdmFyIGlubmVyRWxlbWVudCA9ICQoXCI8ZGl2IGNsYXNzPSdyb3cnPjwvZGl2PlwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5odG1sKGlubmVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgICQuZ2V0KHRoaXMuZm9sZGVyICsgXCIvYWN0aXZpdGVpdGVuLmpzb25cIiwgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuYWN0aXZpdGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQWN0aXZpdHkoaW5uZXJFbGVtZW50LCBkYXRhLmFjdGl2aXRpZXNbaV0ubmFtZSwgZGF0YS5hY3Rpdml0aWVzW2ldLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXJBY3Rpdml0eShlbGVtZW50OiBKUXVlcnksIGFjdGl2aXR5bmFtZTogc3RyaW5nLCBhY3Rpdml0eXRpdGxlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgJC5nZXQodGhpcy5mb2xkZXIgKyBgL2FjdGl2aXRlaXRlbi9kZXNjcmlwdGlvbnMvJHthY3Rpdml0eW5hbWV9Lmh0bWxgLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGA8ZGl2IGNsYXNzPSdjb2wteHMtMTIgYWN0aXZpdHknPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J2FjdGl2aXR5LWltYWdlJyBzdHlsZT0nYmFja2dyb3VuZC1pbWFnZTogdXJsKHBhZ2VzL2FjdGl2aXRlaXRlbi9pbWFnZXMvJHthY3Rpdml0eW5hbWV9LnBuZyk7Jz48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSdhY3Rpdml0eS1kZXNjcmlwdGlvbic+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9J2FjdGl2aXRlaXRlbi5odG1sP3BhZ2U9JHthY3Rpdml0eW5hbWV9Jz4ke2FjdGl2aXR5dGl0bGV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9J2FjdGl2aXRlaXRlbi5odG1sP3BhZ2U9JHthY3Rpdml0eW5hbWV9Jz5sZWVzIG1lZXI8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PmApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlckFjdGl2aXR5UGFnZShlbGVtZW50OiBKUXVlcnksIGFjdGl2aXR5bmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICQuZ2V0KHRoaXMuZm9sZGVyICsgYC9hY3Rpdml0ZWl0ZW4vcGFnZXMvJHthY3Rpdml0eW5hbWV9Lmh0bWxgLCBkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKFwiPHA+QmVuIGplIG5pZXV3c2dpZXJpZyBnZXdvcmRlbiBlbiB3aWwgamUgbWVlZG9lbiwgb2YgaGViIGplIHZyYWdlbj8gQmVsIG9mIDxhIGhyZWY9J21haWx0bzppbmZvQGRhYXJ3b3JkaWtzdGlsdmFuLm5sJz5tYWlsPC9hPiBkYW4gZ2VydXN0ITwvcD5cIik7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKFwianVtYm90cm9uXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKGpRdWVyeSkpO1xyXG5cclxuZnVuY3Rpb24gc2VuZEVtYWlsKGVsZW1lbnQ6IGFueSk6IGFueSB7XHJcbiAgICB2YXIgYnV0dG9uID0gJChlbGVtZW50KTtcclxuICAgIHZhciBuYW1lID0gJChcIiNuYW1lXCIpLnZhbCgpO1xyXG4gICAgdmFyIGVtYWlsID0gJChcIiNlbWFpbFwiKS52YWwoKTtcclxuICAgIHZhciBtZXNzYWdlID0gJChcIiNtZXNzYWdlXCIpLnZhbCgpO1xyXG5cclxuICAgIHZhciB2YWxpZCA9IHRydWU7XHJcbiAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkKFwiI25hbWV2YWxpZFwiKS5odG1sKFwiVnVsIGEudS5iLiB1dyBuYWFtIGluLlwiKTtcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiI25hbWV2YWxpZFwiKS5odG1sKFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlbWFpbC5sZW5ndGggPT09IDAgfHwgZW1haWwuaW5kZXhPZihcIkBcIikgPT09IC0xIHx8IGVtYWlsLmluZGV4T2YoXCIuXCIpID09PSAtMSkge1xyXG4gICAgICAgICQoXCIjZW1haWx2YWxpZFwiKS5odG1sKFwiVnVsIGEudS5iLiBlZW4gZ2VsZGlnIGUtbWFpbGFkcmVzIGluLlwiKTtcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKFwiI2VtYWlsdmFsaWRcIikuaHRtbChcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWVzc2FnZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkKFwiI21lc3NhZ2V2YWxpZFwiKS5odG1sKFwiVnVsIGEudS5iLiBlZW4gYmVyaWNodCBpbi5cIik7XHJcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChcIiNtZXNzYWdldmFsaWRcIikuaHRtbChcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbi5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICBidXR0b24udGV4dChcIlV3IGJlcmljaHQgd29yZHQgdmVyc3R1dXJkLi4uXCIpO1xyXG5cclxuICAgIHZhciByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgZW1haWw6IGVtYWlsLFxyXG4gICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcclxuICAgIH07XHJcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KTtcclxuICAgICQucG9zdChcImFwaS9lbWFpbC5waHBcIiwgcmVxdWVzdERhdGEsIHJlc3BvbnNlRGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICAkKFwiI2NvbnRhY3Rmb3JtXCIpLmh0bWwoXCI8aDE+Q29udGFjdDwvaDE+PHA+VXcgYmVyaWNodCBpcyB2ZXJ6b25kZW4uPC9wPlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiI2NvbnRhY3Rmb3JtXCIpLmh0bWwoXCI8aDE+Q29udGFjdDwvaDE+PHA+VXcgYmVyaWNodCBrb24gbmlldCB2ZXJ6b25kZW4gd29yZGVuLCBwcm9iZWVyIGhldCBsYXRlciBhLnUuYi4gb3BuaWV1dy48L3A+XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzY3JpYmVUb05ld3NsZXR0ZXIoZWxlbWVudDogYW55KTogYW55IHtcclxuICAgIHZhciBidXR0b24gPSAkKGVsZW1lbnQpO1xyXG4gICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIikudmFsKCk7XHJcbiAgICB2YXIgZW1haWwgPSAkKFwiI2VtYWlsXCIpLnZhbCgpO1xyXG5cclxuICAgIHZhciB2YWxpZCA9IHRydWU7XHJcbiAgICAkKFwiI3ZhbGlkXCIpLmh0bWwoXCJcIik7XHJcblxyXG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgJChcIiN2YWxpZFwiKS5hcHBlbmQoXCJWdWwgYS51LmIuIHV3IG5hYW0gaW4uPGJyIC8+XCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVtYWlsLmxlbmd0aCA9PT0gMCB8fCBlbWFpbC5pbmRleE9mKFwiQFwiKSA9PT0gLTEgfHwgZW1haWwuaW5kZXhPZihcIi5cIikgPT09IC0xKSB7XHJcbiAgICAgICAgJChcIiN2YWxpZFwiKS5hcHBlbmQoXCJWdWwgYS51LmIuIGVlbiBnZWxkaWcgZS1tYWlsYWRyZXMgaW4uXCIpO1xyXG4gICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b24ucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgYnV0dG9uLnRleHQoXCJVIHdvcmR0IGFhbmdlbWVsZC4uLlwiKTtcclxuXHJcbiAgICB2YXIgcmVxdWVzdCA9IHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgfTtcclxuICAgIHZhciByZXF1ZXN0RGF0YSA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpO1xyXG4gICAgJC5wb3N0KFwiYXBpL25ld3NsZXR0ZXIucGhwXCIsIHJlcXVlc3REYXRhLCByZXNwb25zZURhdGEgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZURhdGEpIHtcclxuICAgICAgICAgICAgJChcIiNuZXdzbGV0dGVyZm9ybVwiKS5odG1sKFwiPGgxPk5pZXV3c2JyaWVmPC9oMT48cD5VIGJlbnQgaW5nZXNjaHJldmVuIHZvb3IgZGUgbmlldXdzYnJpZWYuPC9wPlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiI25ld3NsZXR0ZXJmb3JtXCIpLmh0bWwoXCI8aDE+Q29udGFjdDwvaDE+PHA+VSBrdW50IG9wIGhldCBtb21lbnQgbmlldCB3b3JkZW4gaW5nZXNjaHJldmVuLCBwcm9iZWVyIGhldCBsYXRlciBhLnUuYi4gb3BuaWV1dy48L3A+XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
